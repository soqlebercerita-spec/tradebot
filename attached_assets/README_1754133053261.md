# Advanced MetaTrader5 Trading Bot

A sophisticated automated trading bot for MetaTrader5 with advanced technical analysis, risk management, and real-time monitoring capabilities.

## Features

### Core Trading Features
- **Automated Trading**: Fully automated buy/sell signal generation and execution
- **Technical Indicators**: Multiple indicators including MA, EMA, WMA, RSI, Bollinger Bands, MACD
- **Scalping Mode**: High-frequency trading with configurable TP/SL percentages
- **Trailing Stops**: Dynamic stop-loss adjustment to maximize profits
- **Multi-timeframe Analysis**: Support for different timeframes and market conditions

### Risk Management
- **Position Sizing**: Automatic position size calculation based on risk percentage
- **Daily Limits**: Maximum trades per session and daily loss limits
- **Drawdown Protection**: Automatic trading halt on maximum drawdown
- **Correlation Checks**: Avoid overexposure to correlated instruments
- **Trading Hours**: Configurable trading session times

### Monitoring & Notifications
- **Real-time GUI**: Advanced tkinter interface with live updates
- **Telegram Integration**: Instant notifications for trades, alerts, and status updates
- **Comprehensive Logging**: Detailed trade logs, error logs, and performance metrics
- **Performance Analytics**: Win rate, profit factor, and statistical analysis

### Advanced Features
- **News Avoidance**: Skip trading during high-impact news times
- **Market Spike Detection**: Avoid trading during unusual price movements
- **Configuration Management**: Save/load trading settings
- **Backup & Recovery**: Automatic reconnection and state recovery

## Installation & Setup

### Prerequisites
- MetaTrader5 terminal installed and running
- Python 3.7 or higher
- Required Python packages (install with pip):
  ```bash
  pip install MetaTrader5 numpy requests tkinter
  ```

### Configuration

1. **MetaTrader5 Setup**:
   - Enable "Allow automated trading" in MT5
   - Enable "Allow DLL imports"
   - Ensure your trading account has sufficient balance

2. **Environment Variables** (Optional):
   ```bash
   export TELEGRAM_BOT_TOKEN="your_telegram_bot_token"
   export TELEGRAM_CHAT_ID="your_telegram_chat_id"
   ```

3. **Bot Configuration**:
   - Edit `config.py` to adjust trading parameters
   - Modify risk management settings as needed
   - Set appropriate trading hours for your timezone

## Usage

### Starting the Bot

1. Run the main application:
   ```bash
   python trading_bot.py
   ```

2. Connect to MetaTrader5 using the "Connect MT5" button

3. Configure your trading settings:
   - Symbol (e.g., XAUUSDm, EURUSD)
   - Lot size
   - Take Profit and Stop Loss percentages
   - Risk management parameters

4. Click "Start Bot" to begin automated trading

### GUI Interface

The bot features a comprehensive GUI with the following sections:

- **Connection & Status**: MT5 connection status and account information
- **Trading Settings**: Symbol, lot size, TP/SL configuration
- **Risk Management**: Position limits, drawdown protection, trading hours
- **Bot Controls**: Start/stop, manual position closing, settings management
- **Trading Log**: Real-time log of all trading activities

### Key Controls

- **Start Bot**: Begin automated trading
- **Stop Bot**: Stop trading (existing positions remain open)
- **Close All Positions**: Manually close all open trades
- **Save Settings**: Persist current configuration
- **Export Logs**: Export all trading data and logs

## Configuration Options

### Trading Parameters
```python
# config.py
TP_PERSEN_DEFAULT = 0.01      # 1% Take Profit
SL_PERSEN_DEFAULT = 0.05      # 5% Stop Loss
SCALPING_TP_PERSEN = 0.005    # 0.5% Scalping TP
SCALPING_SL_PERSEN = 0.01     # 1% Scalping SL
