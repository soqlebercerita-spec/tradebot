# Overview

This is a sophisticated automated trading bot for MetaTrader5 that provides advanced technical analysis, risk management, and real-time monitoring capabilities. The bot features automated signal generation and execution, multiple technical indicators (MA, EMA, WMA, RSI, Bollinger Bands, MACD), scalping mode with configurable parameters, and comprehensive risk management including position sizing, daily limits, and drawdown protection. It includes a real-time GUI interface built with tkinter, Telegram integration for notifications, and detailed logging and performance analytics.

## Recent Updates (January 2025)
- Fixed all LSP diagnostic errors across codebase
- Created Windows-compatible version (trading_bot_windows.py) for live MT5 trading
- Added comprehensive installation guide and launcher scripts
- Implemented proper error handling and variable initialization
- Enhanced simulation mode with virtual account setup dialog

# User Preferences

Preferred communication style: Simple, everyday language.

# System Architecture

## Core Architecture Pattern
The application follows a modular architecture with separation of concerns across distinct components. Each module handles a specific aspect of trading operations, making the system maintainable and extensible.

## Component Structure

### Trading Engine (trading_bot.py)
- **Main Controller**: Orchestrates all trading operations and manages the overall bot lifecycle
- **Threading Model**: Uses separate threads for GUI updates and trading operations to prevent blocking
- **State Management**: Maintains bot state including running status, positions, and counters

### Technical Analysis Module (indicators.py)
- **Indicator Calculations**: Implements multiple technical indicators including Simple Moving Average (MA), Exponential Moving Average (EMA), and Weighted Moving Average (WMA)
- **Signal Generation**: Processes market data to generate trading signals based on technical analysis
- **Data Processing**: Handles price data arrays and performs mathematical calculations using NumPy

### Risk Management System (risk_manager.py)
- **Position Sizing**: Automatically calculates appropriate position sizes based on risk percentage
- **Daily Limits**: Enforces maximum trades per session and daily loss limits
- **Drawdown Protection**: Monitors account drawdown and halts trading when limits are exceeded
- **Account Monitoring**: Continuously checks account balance and trading conditions

### Communication Layer (telegram_notifier.py)
- **Message Queue**: Implements a threaded message queue system for reliable notification delivery
- **Rate Limiting**: Prevents spam by implementing message throttling and duplicate detection
- **Asynchronous Delivery**: Uses background threads to send notifications without blocking trading operations

### Logging System (trade_logger.py)
- **Multi-format Logging**: Supports CSV for trade data, text files for general logs, and JSON for performance metrics
- **Structured Data**: Maintains detailed records of all trading activities, errors, and performance statistics
- **File Management**: Automatically creates and manages log directories and file structures

### Configuration Management (config.py)
- **Centralized Settings**: Contains all configurable parameters including trading parameters, risk settings, and technical indicator configurations
- **Environment Integration**: Supports environment variables for sensitive data like API tokens
- **Default Values**: Provides sensible defaults for all configuration options

## Data Flow Architecture

### Market Data Processing
1. MetaTrader5 connection retrieves real-time market data
2. Technical indicators process price data to generate signals
3. Risk manager validates trading conditions
4. Trading decisions are executed through MT5 API

### Notification Pipeline
1. Trading events trigger notification creation
2. Messages are queued in the Telegram notifier
3. Background thread processes queue with rate limiting
4. Notifications are delivered to configured Telegram chat

### Logging Pipeline
1. All trading activities generate log entries
2. Different log types are routed to appropriate files
3. Performance metrics are aggregated and stored
4. Log files are automatically managed and rotated

## GUI Architecture
The interface uses tkinter with a tabbed layout providing real-time monitoring, configuration management, and manual trading controls. The GUI runs on a separate thread to maintain responsiveness during trading operations.

# External Dependencies

## MetaTrader5 Integration
- **MT5 Python API**: Core integration for market data retrieval and trade execution
- **Real-time Data**: Live price feeds and market information
- **Order Management**: Position opening, closing, and modification capabilities

## Telegram Bot API
- **Notification Service**: Real-time alerts for trading activities and system status
- **HTTP Requests**: RESTful API calls for message delivery
- **Rate Limiting**: Built-in handling for Telegram's API rate limits

## Python Libraries
- **NumPy**: Mathematical calculations for technical indicators and data processing
- **Tkinter**: GUI framework for the monitoring interface
- **Threading**: Concurrent execution for non-blocking operations
- **Requests**: HTTP client for Telegram API communication
- **CSV/JSON**: Data serialization for logging and configuration

## File System Dependencies
- **Log Files**: Persistent storage for trading history and performance metrics
- **Configuration Files**: Settings persistence and recovery
- **Data Export**: CSV format for trade analysis and reporting

## Trading Platform
- **MetaTrader5 Terminal**: Required to be installed and running with appropriate permissions
- **Trading Account**: Active forex/commodity trading account with sufficient balance
- **Market Access**: Real-time market data subscription and trading permissions